<!DOCTYPE html>
<html lang="es" data-color-scheme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vista Previa - CV</title>
  <style>
    :root {
      --color-white: rgba(255, 255, 255, 1);
      --color-black: rgba(0, 0, 0, 1);
      --color-cream-50: rgba(252, 252, 249, 1);
      --color-cream-100: rgba(255, 255, 253, 1);
      --color-gray-200: rgba(245, 245, 245, 1);
      --color-gray-300: rgba(167, 169, 169, 1);
      --color-gray-400: rgba(119, 124, 124, 1);
      --color-slate-500: rgba(98, 108, 113, 1);
      --color-brown-600: rgba(94, 82, 64, 1);
      --color-charcoal-700: rgba(31, 33, 33, 1);
      --color-charcoal-800: rgba(38, 40, 40, 1);
      --color-slate-900: rgba(19, 52, 59, 1);
      --color-teal-300: rgba(50, 184, 198, 1);
      --color-teal-400: rgba(45, 166, 178, 1);
      --color-teal-500: rgba(33, 128, 141, 1);
      --color-teal-600: rgba(29, 116, 128, 1);
      --color-teal-700: rgba(26, 104, 115, 1);
      --color-teal-800: rgba(41, 150, 161, 1);
      --color-red-400: rgba(255, 84, 89, 1);
      --color-red-500: rgba(192, 21, 47, 1);
      --color-orange-400: rgba(230, 129, 97, 1);
      --color-orange-500: rgba(168, 75, 47, 1);

      --color-brown-600-rgb: 94, 82, 64;
      --color-teal-500-rgb: 33, 128, 141;
      --color-slate-900-rgb: 19, 52, 59;
      --color-slate-500-rgb: 98, 108, 113;
      --color-red-500-rgb: 192, 21, 47;
      --color-red-400-rgb: 255, 84, 89;
      --color-orange-500-rgb: 168, 75, 47;
      --color-orange-400-rgb: 230, 129, 97;

      --color-bg-1: rgba(59, 130, 246, 0.08);
      --color-bg-2: rgba(245, 158, 11, 0.08);
      --color-bg-3: rgba(34, 197, 94, 0.08);
      --color-bg-4: rgba(239, 68, 68, 0.08);
      --color-bg-5: rgba(147, 51, 234, 0.08);
      --color-bg-6: rgba(249, 115, 22, 0.08);
      --color-bg-7: rgba(236, 72, 153, 0.08);
      --color-bg-8: rgba(6, 182, 212, 0.08);

      --color-background: var(--color-cream-50);
      --color-surface: var(--color-cream-100);
      --color-text: var(--color-slate-900);
      --color-text-secondary: var(--color-slate-500);
      --color-primary: var(--color-teal-500);
      --color-primary-hover: var(--color-teal-600);
      --color-primary-active: var(--color-teal-700);
      --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
      --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
      --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
      --color-border: rgba(var(--color-brown-600-rgb), 0.2);
      --color-btn-primary-text: var(--color-cream-50);
      --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
      --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
      --color-error: var(--color-red-500);
      --color-success: var(--color-teal-500);
      --color-warning: var(--color-orange-500);
      --color-info: var(--color-slate-500);
      --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);
      --color-select-caret: rgba(var(--color-slate-900-rgb), 0.8);

      --color-success-rgb: 33, 128, 141;
      --color-error-rgb: 192, 21, 47;
      --color-warning-rgb: 168, 75, 47;
      --color-info-rgb: 98, 108, 113;

      --font-family-base: "FKGroteskNeue", "Geist", "Inter", -apple-system,
        BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      --font-family-mono: "Berkeley Mono", ui-monospace, SFMono-Regular, Menlo,
        Monaco, Consolas, monospace;
      --font-size-xs: 11px;
      --font-size-sm: 12px;
      --font-size-base: 14px;
      --font-size-md: 14px;
      --font-size-lg: 16px;
      --font-size-xl: 18px;
      --font-size-2xl: 20px;
      --font-size-3xl: 24px;
      --font-size-4xl: 30px;
      --font-weight-normal: 400;
      --font-weight-medium: 500;
      --font-weight-semibold: 550;
      --font-weight-bold: 600;
      --line-height-tight: 1.2;
      --line-height-normal: 1.5;
      --letter-spacing-tight: -0.01em;

      --space-0: 0;
      --space-1: 1px;
      --space-2: 2px;
      --space-4: 4px;
      --space-6: 6px;
      --space-8: 8px;
      --space-10: 10px;
      --space-12: 12px;
      --space-16: 16px;
      --space-20: 20px;
      --space-24: 24px;
      --space-32: 32px;

      --radius-sm: 6px;
      --radius-base: 8px;
      --radius-md: 10px;
      --radius-lg: 12px;
      --radius-full: 9999px;

      --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.02);
      --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04),
        0 2px 4px -1px rgba(0, 0, 0, 0.02);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.04),
        0 4px 6px -2px rgba(0, 0, 0, 0.02);
      --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.15),
        inset 0 -1px 0 rgba(0, 0, 0, 0.03);

      --duration-fast: 150ms;
      --duration-normal: 250ms;
      --ease-standard: cubic-bezier(0.16, 1, 0.3, 1);

      --container-sm: 640px;
      --container-md: 768px;
      --container-lg: 1024px;
      --container-xl: 1280px;
    }

    html {
      font-size: var(--font-size-base);
      font-family: var(--font-family-base);
      line-height: var(--line-height-normal);
      color: var(--color-text);
      background: radial-gradient(circle at top, #f0f0f0 0, #d9d9d9 40%, #bfbfbf 100%);
      -webkit-font-smoothing: antialiased;
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    *,
    *::before,
    *::after {
      box-sizing: inherit;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      margin: 0;
      font-weight: var(--font-weight-semibold);
      line-height: var(--line-height-tight);
      color: var(--color-text);
      letter-spacing: var(--letter-spacing-tight);
    }

    h1 {
      font-size: var(--font-size-xl);
    }
    h2 {
      font-size: var(--font-size-lg);
    }
    h3 {
      font-size: var(--font-size-sm);
    }

    p {
      margin: 0 0 var(--space-8) 0;
    }

    a {
      color: var(--color-primary);
      text-decoration: none;
    }

    a:hover {
      color: var(--color-primary-hover);
    }

    .container {
      width: 100%;
      max-width: 960px;
      padding: var(--space-24);
    }

    .cv-wrapper {
      display: grid;
      grid-template-columns: 1.1fr 1.7fr;
      gap: var(--space-24);
      background: linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 40%, #f7f7f7 100%);
      border-radius: var(--radius-lg);
      border: 1px solid rgba(120, 120, 120, 0.3);
      box-shadow: var(--shadow-md);
      overflow: hidden;
    }

    .cv-sidebar {
      padding: var(--space-20);
      background: linear-gradient(180deg, #f0f0f0 0%, #d8d8d8 50%, #cfcfcf 100%);
      border-right: 1px solid rgba(120, 120, 120, 0.25);
    }

    .cv-main {
      padding: var(--space-20) var(--space-24);
      background: radial-gradient(circle at top left, #f5f5f5 0, #e3e3e3 45%, #f7f7f7 100%);
    }

    .profile-image {
      width: 120px;
      height: 120px;
      border-radius: 8px;
      object-fit: cover;
      float: right;
      margin-left: 20px;
      margin-bottom: 10px;
      border: 2px solid rgba(120, 120, 120, 0.3);
    }

    .name {
      font-size: var(--font-size-lg);
      font-weight: var(--font-weight-bold);
      margin-bottom: var(--space-4);
    }

    .role {
      font-size: var(--font-size-sm);
      color: var(--color-text-secondary);
      margin-bottom: var(--space-16);
    }

    .section-title {
      font-size: var(--font-size-sm);
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--color-text-secondary);
      margin-bottom: var(--space-8);
    }

    .divider {
      height: 1px;
      width: 100%;
      background: linear-gradient(
        to right,
        rgba(120, 120, 120, 0.4),
        rgba(120, 120, 120, 0.1)
      );
      margin: var(--space-12) 0 var(--space-16);
    }

    .contact-item {
      font-size: var(--font-size-sm);
      margin-bottom: var(--space-6);
      color: var(--color-text-secondary);
    }

    .tag-list {
      display: flex;
      flex-wrap: wrap;
      gap: var(--space-6);
    }

    .tag {
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid rgba(120, 120, 120, 0.35);
      font-size: var(--font-size-xs);
      color: var(--color-text-secondary);
      background: linear-gradient(135deg, #f9f9f9 0%, #e9e9e9 100%);
    }

    .summary {
      font-size: var(--font-size-sm);
      color: var(--color-text-secondary);
    }

    .experience-item {
      margin-bottom: var(--space-16);
    }

    .experience-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: var(--space-8);
      margin-bottom: var(--space-4);
    }

    .experience-role {
      font-weight: var(--font-weight-semibold);
      font-size: var(--font-size-md);
    }

    .experience-company {
      font-size: var(--font-size-sm);
      color: var(--color-text-secondary);
    }

    .experience-dates {
      font-size: var(--font-size-xs);
      color: var(--color-text-secondary);
      white-space: nowrap;
    }

    .bullet-list {
      list-style: none;
      padding-left: 0;
      margin: 0;
    }

    .bullet-list li {
      position: relative;
      padding-left: 16px;
      margin-bottom: 4px;
      font-size: var(--font-size-sm);
      color: var(--color-text-secondary);
    }

    .bullet-list li::before {
      content: "";
      position: absolute;
      left: 4px;
      top: 7px;
      width: 4px;
      height: 4px;
      border-radius: 50%;
      background: rgba(120, 120, 120, 0.85);
    }

    .two-col {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: var(--space-12);
    }

    .chip-group {
      display: flex;
      flex-wrap: wrap;
      gap: var(--space-6);
    }

    .chip {
      font-size: var(--font-size-xs);
      padding: 4px 10px;
      border-radius: 999px;
      background: linear-gradient(135deg, #f4f4f4 0%, #dedede 100%);
      border: 1px solid rgba(120, 120, 120, 0.35);
      color: var(--color-text-secondary);
    }

    .profile-image-placeholder {
      width: 150px;
      height: 220px;
      border-radius: var(--radius-lg);
      border: 2px solid rgba(120, 120, 120, 0.3);
      overflow: hidden;
      background: linear-gradient(135deg, #f0f0f0 0%, #e0e0e0 100%);
      margin-top: var(--space-8);
    }

    .profile-image-placeholder img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .print-btn {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 12px 24px;
      background: var(--color-teal-500);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      z-index: 100;
    }

    .print-btn:hover {
      background: var(--color-teal-600);
    }

    @media print {
      .print-btn {
        display: none;
      }

      html {
        background: white !important;
      }

      body {
        background: white !important;
        align-items: flex-start;
      }

      .container {
        padding: 0;
        max-width: 100%;
      }

      .cv-wrapper {
        box-shadow: none !important;
        border: none !important;
        border-radius: 0 !important;
        background: white !important;
      }

      .cv-sidebar {
        background: white !important;
        border-right: 1px solid #e0e0e0 !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }

      .cv-main {
        background: white !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }

      .tag,
      .chip {
        background: white !important;
        border: 1px solid #e0e0e0 !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }

      .divider {
        background: #e0e0e0 !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }

      .profile-image-placeholder {
        border: 2px solid #e0e0e0 !important;
        background: white !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }

      .bullet-list li::before {
        background: #666 !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }
    }

    @media (max-width: 768px) {
      body {
        align-items: flex-start;
      }

      .cv-wrapper {
        grid-template-columns: 1fr;
      }

      .cv-sidebar {
        border-right: none;
        border-bottom: 1px solid #e0e0e0;
      }
    }

    @font-face {
      font-family: 'FKGroteskNeue';
      src: url('https://r2cdn.perplexity.ai/fonts/FKGroteskNeue.woff2')
        format('woff2');
    }
  </style>
</head>
<body>
  <button class="print-btn" onclick="window.print()">Imprimir / Guardar PDF</button>

  <div class="container">
    <article class="cv-wrapper">
      <aside class="cv-sidebar">
        <header>
          <div style="display: flex; gap: var(--space-16); align-items: flex-start;">
            <div style="flex: 1;">
              <h1 class="name" id="name"></h1>
              <h2 class="role" id="role"></h2>  
              <p class="contact-item" id="location"></p>
              <p class="contact-item" id="phone"></p>
              <p class="contact-item" id="email"></p>
              <p class="contact-item" id="linkedin"></p>
            </div>
            <div class="profile-image-placeholder" style="flex-shrink: 0; margin-top: 0;" id="profileImageContainer">
            </div>
          </div>
        </header>
        <div class="divider"></div>

        <section>
          <h2 class="section-title">Perfil profesional</h2>
          <p class="summary" id="summary"></p>
        </section>

        <div class="divider"></div>

        <section>
          <h2 class="section-title">Competencias clave</h2>
          <div class="chip-group" id="skillsContainer"></div>
        </section>

        <div class="divider"></div>

        <section>
          <h2 class="section-title">Educaci칩n</h2>
          <p><strong>Licenciatura en Ciencias de la Comunicaci칩n</strong></p>
          <p class="contact-item">Instituci칩n | A침o de egreso</p>
        </section>

        <div class="divider"></div>

        <section>
          <h2 class="section-title">Herramientas</h2>
          <div class="tag-list" id="toolsContainer"></div>
        </section>

        <div class="divider"></div>

      </aside>

      <main class="cv-main">
        <div id="profileImageContainer"></div>
        <section>
          <h2 class="section-title">Experiencia profesional</h2>
          <div id="experienceContainer"></div>
        </section>
      </main>
    </article>
  </div>

  <script>
    const cvData = JSON.parse(localStorage.getItem('previewCV'));

    // Theme configurations
    const themes = {
      professional: {
        primary: '#21808d',
        secondary: '#13343b',
        accent: '#f5f5f5',
        text: '#13343b',
        background: 'linear-gradient(135deg, #f5f5f5 0%, #e0e0e0 40%, #f7f7f7 100%)'
      },
      modern: {
        primary: '#2563eb',
        secondary: '#1e293b',
        accent: '#f8fafc',
        text: '#0f172a',
        background: 'linear-gradient(135deg, #f8fafc 0%, #e2e8f0 40%, #f1f5f9 100%)'
      },
      creative: {
        primary: '#9333ea',
        secondary: '#f97316',
        accent: '#fef3c7',
        text: '#292524',
        background: 'linear-gradient(135deg, #fef3c7 0%, #fde68a 40%, #fef3c7 100%)'
      },
      minimal: {
        primary: '#000000',
        secondary: '#404040',
        accent: '#ffffff',
        text: '#000000',
        background: 'linear-gradient(135deg, #ffffff 0%, #f5f5f5 40%, #ffffff 100%)'
      },
      warm: {
        primary: '#a85a2f',
        secondary: '#5e5240',
        accent: '#fcfcf9',
        text: '#5e5240',
        background: 'linear-gradient(135deg, #fcfcf9 0%, #f5efe5 40%, #fcfcf9 100%)'
      }
    };

    const fonts = {
      inter: "'Inter', -apple-system, BlinkMacSystemFont, sans-serif",
      roboto: "'Roboto', -apple-system, BlinkMacSystemFont, sans-serif",
      lato: "'Lato', -apple-system, BlinkMacSystemFont, sans-serif",
      merriweather: "'Merriweather', Georgia, serif",
      playfair: "'Playfair Display', Georgia, serif"
    };

    const fontSizes = {
      small: '12px',
      medium: '14px',
      large: '16px'
    };

    if (cvData) {
      // Apply theme
      const theme = themes[cvData.cvTheme] || themes.professional;
      const root = document.documentElement;
      root.style.setProperty('--color-primary', theme.primary);
      root.style.setProperty('--color-text', theme.text);
      root.style.setProperty('--color-text-secondary', theme.secondary);
      document.body.style.background = theme.background;
      
      // Apply font
      const fontFamily = fonts[cvData.fontFamily] || fonts.inter;
      document.body.style.fontFamily = fontFamily;
      
      // Apply font size
      const fontSize = fontSizes[cvData.fontSize] || fontSizes.medium;
      root.style.setProperty('--font-size-base', fontSize);

      document.getElementById('name').textContent = cvData.name || '';
      document.getElementById('role').textContent = cvData.role || '';
      document.getElementById('location').textContent = cvData.location || '';
      document.getElementById('phone').textContent = 'Tel: ' + (cvData.phone || '');
      document.getElementById('email').textContent = 'Correo: ' + (cvData.email || '');
      document.getElementById('linkedin').textContent = 'LinkedIn: ' + (cvData.linkedin || '');
      document.getElementById('summary').textContent = cvData.summary || '';

      // Add profile image if exists
      const profileImageContainer = document.getElementById('profileImageContainer');
      if (cvData.profileImage) {
        const img = document.createElement('img');
        img.src = cvData.profileImage;
        img.alt = 'Foto de perfil';
        img.className = 'profile-image';
        profileImageContainer.appendChild(img);
      }

      const skillsContainer = document.getElementById('skillsContainer');
      if (cvData.skills) {
        cvData.skills.split(',').forEach(skill => {
          const chip = document.createElement('span');
          chip.className = 'chip';
          chip.textContent = skill.trim();
          skillsContainer.appendChild(chip);
        });
      }

      const toolsContainer = document.getElementById('toolsContainer');
      if (cvData.tools) {
        cvData.tools.split(',').forEach(tool => {
          const tag = document.createElement('span');
          tag.className = 'tag';
          tag.textContent = tool.trim();
          toolsContainer.appendChild(tag);
        });
      }

      const experienceContainer = document.getElementById('experienceContainer');
      if (cvData.experiences) {
        cvData.experiences.forEach(exp => {
          const article = document.createElement('article');
          article.className = 'experience-item';
          
          const responsibilities = exp.responsibilities.split('\n').filter(r => r.trim());
          const responsibilitiesList = responsibilities.map(r => `<li>${r.trim()}</li>`).join('');
          
          article.innerHTML = `
            <div class="experience-header">
              <div>
                <div class="experience-role">${exp.role}</div>
                <div class="experience-company">${exp.company}</div>
              </div>
              <div class="experience-dates">${exp.dates}</div>
            </div>
            <ul class="bullet-list">
              ${responsibilitiesList}
            </ul>
          `;
          experienceContainer.appendChild(article);
        });
      }
    }
  </script>
</body>
</html>
